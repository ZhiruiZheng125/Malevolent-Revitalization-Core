<?xml version="1.0" encoding="utf-8" ?>
<Defs>
<!--Remote resurrector-->
  
  <ThingDef ParentName="MechanitorImplantCraftableBase" MayRequire="ludeon.rimworld.biotech">
    <defName>ApocritonMechResurrector</defName>
    <label>Malevolent Revitalization Core</label>
    <description>The Malevolent Revitalization Core is a battlefield implant reverse-engineered from the Apocriton's resurrection ability, enabling users to efficiently revive nearby mechanoids. Although designed to block the Apocriton's psychic interference, its neural link subtly exposes users to the "Nefarious Drone," gradually altering their cognition under the influence of Malevolent Intelligence./n/nHint: The implant inject Nano Cyber Serum to reset resurrection charges in the battlefield. This implant can be self-installed up to 3 times to increase its effect.</description>
    <descriptionHyperlinks>
      <AbilityDef>ApocritonMechResurrector</AbilityDef>
      <ThingDef>nanoCyberSerum</ThingDef>
    </descriptionHyperlinks>
    <techLevel>Archotech</techLevel>
    <costList>
      <NanostructuringChip>1</NanostructuringChip>
      <SignalChip>2</SignalChip>
      <MedicineUltratech>5</MedicineUltratech>
      <ComponentSpacer>12</ComponentSpacer>
      <Plasteel>15</Plasteel>
    </costList>

    <statBases>
      <MaxInstallCount>3</MaxInstallCount>
      <MarketValue>6000</MarketValue>
      <WorkToMake>100000</WorkToMake>
    </statBases>
    
    <recipeMaker>
      <researchPrerequisite>ZIRI_tech_ApocritonMechResurrector</researchPrerequisite>
      <skillRequirements>
        <Crafting>12</Crafting>
        <Intellectual>12</Intellectual>
      </skillRequirements>
    </recipeMaker>

    <graphicData> <!--try change color -->
		  <texPath>Things/Item/apocritonMechResurrector</texPath>
		  <graphicClass>Graphic_Single</graphicClass>
		  <drawSize>0.8</drawSize>
      <!-- <color>(154,124,104)</color> -->
    </graphicData>

    <comps>
      <li Class="CompProperties_Usable">
        <compClass>CompUsableImplant</compClass>
        <useJob>UseItem</useJob>
        <useLabel>Implant {0_label}</useLabel>
        <userMustHaveHediff>MechlinkImplant</userMustHaveHediff>
      </li>
      <li Class="CompProperties_UseEffectInstallImplant">
        <compClass>ZIRI_ApocritonMechResurrector.CompUseEffect_InstallApocritonMechResurrector</compClass>
        <hediffDef>ApocritonMechResurrector</hediffDef>
        <bodyPart>Brain</bodyPart>
        <canUpgrade>true</canUpgrade>
      </li>
    </comps>

    
  </ThingDef>

  <HediffDef MayRequire="ludeon.rimworld.biotech">
    <defName>ApocritonMechResurrector</defName>
    <hediffClass>Hediff_Level</hediffClass>
    <label>Malevolent Revitalization Core</label>
    <description>The Malevolent Revitalization Core is a mechanical implant that subjects the user to the "Malevolence Drone," instilling hatred and contempt for organic life. The drone corrode sanity, twisting perception and driving intense hostility toward all living beings. /n/nUsers grow indifferent to the deaths of allies and derive satisfaction from destroying despised organics. Only those with a "Mechanoid Control Link" can counter this cognitive corruption. To endure prolonged battles, the implant suppresses emotions, shields against psychic interference, and ensures ruthless efficiency in extermination campaigns.</description>
    <descriptionShort>A Malevolent-tech implant that allows the user to fully utilize the Apocriton's Mech Resurrection ability but at the cost of enduring the severe Drone of malevolence.</descriptionShort>
    <descriptionHyperlinks>
      <ThingDef>nanoCyberSerum</ThingDef>
      <ThingDef>ApocritonMechResurrector</ThingDef>
    </descriptionHyperlinks>

    <defaultLabelColor>(0.6, 0.6, 1.0)</defaultLabelColor>
    <isBad>false</isBad>
    <priceImpact>true</priceImpact>
    <initialSeverity>1</initialSeverity>
    <minSeverity>0</minSeverity>
    <maxSeverity>3</maxSeverity>
    <keepOnBodyPartRestoration>True</keepOnBodyPartRestoration>
    <levelIsQuantity>true</levelIsQuantity>
    <duplicationAllowed>false</duplicationAllowed>
    <comps>
      <li Class="HediffCompProperties_GiveAbility">
        <abilityDefs>
          <li>ApocritonMechResurrector</li>
        </abilityDefs>
      </li>

      <!-- 憎恶毒蜂死亡爆炸效果 -->
      <li Class = "ZIRI_ApocritonMechResurrector.HediffCompProperties_pawnExpload" >
        <wickTicks>0</wickTicks>
        <explosiveRadius>30.9</explosiveRadius>
        <explodeOnKilled>true</explodeOnKilled>
        <explosiveDamageType>MechBandShockwave</explosiveDamageType>
        <soundDef>MechBandShockwave</soundDef>
        <propagationSpeed>0.5</propagationSpeed>
        <chanceNeverExplodeFromDamage>1</chanceNeverExplodeFromDamage>
        <extraInspectStringKey>MechStunPulseWarning</extraInspectStringKey>
			</li>
      
    </comps>

    <stages>
      <li>
        <minSeverity>1</minSeverity>
        <statOffsets>
          <MechResurrectDistance>9.9</MechResurrectDistance>
          <!-- 由于此处修改成数据可调, 暂时未找到合适的显示方法 -->
          <!-- <MechResurrectMaxChargePoint>30</MechResurrectMaxChargePoint>  -->
          <MentalBreakThreshold>-0.02</MentalBreakThreshold>
        </statOffsets>
      </li>

      <li>
        <minSeverity>2</minSeverity>
        <statOffsets>
          <MechResurrectDistance>14.9</MechResurrectDistance>
          <!-- <MechResurrectMaxChargePoint>40</MechResurrectMaxChargePoint>  -->
          <MentalBreakThreshold>-0.05</MentalBreakThreshold>
        </statOffsets>
      </li>

      <li>
        <minSeverity>3</minSeverity>
        <statOffsets>
          <MechResurrectDistance>19.9</MechResurrectDistance>
          <!-- <MechResurrectMaxChargePoint>50</MechResurrectMaxChargePoint>  -->
          <MentalBreakThreshold>-0.08</MentalBreakThreshold>
        </statOffsets>
      </li>
    </stages>
    
  </HediffDef>

  <AbilityDef MayRequire="ludeon.rimworld.biotech">
    <defName>ApocritonMechResurrector</defName>
    <label>Mech Reawakening</label>
    <description>Malevolent Resurrection Pulse allows the user to fully harness the Apocriton's Mech Resurrection ability. It can unleash a powerful energy pulse without requiring line of sight, overloading fallen nearby mechanoids with incredible efficiency, bringing them back to battle with their injuries intact.</description>
    
    <descriptionHyperlinks>
      <ThingDef>nanoCyberSerum</ThingDef>
      <ThingDef>ApocritonMechResurrector</ThingDef>
    </descriptionHyperlinks>
    <useAverageTargetPositionForWarmupEffecter>true</useAverageTargetPositionForWarmupEffecter>
    <iconPath>UI/Abilities/MechResurrection</iconPath>
    <cooldownTicksRange>120</cooldownTicksRange>
    <casterMustBeCapableOfViolence>false</casterMustBeCapableOfViolence>
    <warmupStartSound>MechResurrect_Warmup</warmupStartSound>
    <canUseAoeToGetTargets>True</canUseAoeToGetTargets>
    <statBases>
        <Ability_EffectRadius>5</Ability_EffectRadius>
    </statBases>
    <warmupEffecter>ApocrionAoeWarmup</warmupEffecter>
    <hostile>false</hostile>
    <displayGizmoWhileUndrafted>true</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
    <hotKey>Misc12</hotKey>
    <uiOrder>5</uiOrder>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <soundCast>MechResurrect_Cast</soundCast>
      <warmupTime>4</warmupTime>
      <onlyManualCast>true</onlyManualCast>
      <range>6.9</range>
      <rangeStat>MechResurrectDistance</rangeStat>
      <requireLineOfSight>false</requireLineOfSight>
      <targetParams>
        <canTargetPawns>false</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetCorpses>true</canTargetCorpses>
        <canTargetAnimals>false</canTargetAnimals>
        <canTargetHumans>false</canTargetHumans>
        <canTargetMechs>true</canTargetMechs>
      </targetParams>
    </verbProperties>

    <comps>
      <li Class="ZIRI_ApocritonMechResurrector.CompProperties_MechanitorResurrectMech">
        <compClass>ZIRI_ApocritonMechResurrector.CompAbilityEffect_MechanitorResurrectMech</compClass>
        <maxCorpseAgeTicks>3600</maxCorpseAgeTicks><!-- max mech been resurrected time 60s -->
        <appliedEffecterDef>MechResurrected</appliedEffecterDef>
        <resolveEffecterDef>MechResurrected</resolveEffecterDef>
        <costs>
          <li>
            <weightClass>Light</weightClass>
            <cost>1</cost>
          </li>
          <li>
            <weightClass>Medium</weightClass>
            <cost>3</cost>
          </li>
          <li>
            <weightClass>Heavy</weightClass>
            <cost>5</cost>
          </li>
        </costs>
      </li>      
    </comps>
  </AbilityDef>

 

</Defs>